<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Login - Rental Property Management</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Enhanced mobile styles for admin login */
        @media (max-width: 768px) {
            .login-card {
                margin: 10px !important;
                padding: 20px !important;
                max-width: calc(100vw - 20px) !important;
            }
            
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .form-input {
                font-size: 16px; /* Prevent zoom on iOS */
                min-height: 44px; /* iOS touch target */
            }
            
            .login-button {
                min-height: 44px;
                font-size: 16px;
            }
            
            .footer-card {
                margin: 10px !important;
                padding: 15px !important;
                font-size: 14px;
            }
            
            .auth-footer p {
                font-size: 14px !important;
            }
        }
        
        @media (max-width: 480px) {
            .logo h1 {
                font-size: 1.6rem;
            }
            
            .auth-container {
                padding: 5px !important;
            }
            
            .footer-card p {
                font-size: 12px !important;
            }
        }
    </style>
</head>
<body>
</html>
                                    <i class="fas fa-home" style="font-size: 48px; color: #fff; opacity: 0.3;"></i>
                                    <p style="color: #fff; opacity: 0.8; margin-top: 20px;">Rental System Admin</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Login Page Wrapper for JS show/hide -->
                    <div id="loginPage" class="page">
                        <div class="login-form-container">
                            <div class="login-card">
                                <div class="logo">
                                    <i class="fas fa-home gradient-icon"></i>
                                    <h1>Rental System</h1>
                                </div>

                                <div id="loginError" class="error-message" style="display: none;"></div>

                                <form id="loginForm">
                                    <div class="form-group">
                                        <input
                                            type="email"
                                            id="email"
                                            name="email"
                                            placeholder="Email address"
                                            class="form-input"
                                            required
                                        />
                                    </div>

                                    <div class="form-group">
                                        <input
                                            type="password"
                                            id="password"
                                            name="password"
                                            placeholder="Password"
                                            class="form-input"
                                            required
                                        />
                                    </div>

                                    <button type="submit" class="login-button" id="loginBtn">
                                        <span id="loginBtnText">Sign in</span>
                                        <div id="loginSpinner" class="loading-spinner" style="display: none;"></div>
                                    </button>
                                </form>

                                <div class="divider">
                                    <span>OR</span>
                                </div>

                                <div style="text-align: center; color: #8e8e8e; font-size: 12px;">
                                    <p>Admin access only</p>
                                    <p style="margin-top: 8px;">
                                        <i class="fas fa-user" style="margin-right: 4px;"></i>
                                        Manage rental properties
                                    </p>
                                </div>
                            </div>

                            <div class="footer-card">
                                <p>Rental System Admin Panel</p>
                                <p style="margin-top: 8px; font-size: 12px;">
                                    Secure access for property management
                                </p>
                                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #dbdbdb;">
                                    <p style="font-size: 12px; color: #8e8e8e;">
                                        Looking for rentals? 
                                        <a href="register.html" style="color: #0095f6; text-decoration: none; font-weight: 500;">
                                            Create Account
                                        </a>
                                        or
                                        <a href="login.html" style="color: #0095f6; text-decoration: none; font-weight: 500;">
                                            Sign In
                                        </a>
                                    </p>
                                    <p style="font-size: 12px; color: #8e8e8e; margin-top: 10px;">
                                        <a href="home.html" style="color: #0095f6; text-decoration: none; font-weight: 500;">
                                            <i class="fas fa-arrow-left" style="margin-right: 5px;"></i>
                                            Back to Main Site
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page" style="display: none;">
            <nav class="navbar">
                <div class="navbar-content">
                    <a href="#" class="navbar-brand" onclick="showDashboard()">
                        <i class="fas fa-home" style="margin-right: 8px;"></i>
                        Rental System
                    </a>
                    
                    <div class="navbar-actions">
                        <a href="#" onclick="showHouses()" class="nav-link">
                            <i class="fas fa-building"></i>
                            Manage Houses
                        </a>
                        
                        <a href="#" onclick="showBookings()" class="nav-link">
                            <i class="fas fa-calendar-check"></i>
                            Manage Bookings
                        </a>
                        
                        <a href="#" onclick="showUsers()" class="nav-link">
                            <i class="fas fa-users"></i>
                            Manage Users
                        </a>
                        
                        <button onclick="logout()" class="logout-button">
                            <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-chart-bar" style="margin-right: 12px;"></i>
                        Dashboard
                    </h1>
                    <p class="page-subtitle">
                        Overview of your rental property management system
                    </p>
                </div>

                <div id="dashboardStats" class="stats-grid">
                    <!-- Stats will be loaded here -->
                </div>

                <div class="quick-actions-card">
                    <h2>Quick Actions</h2>
                    <p>Manage your rental properties efficiently</p>
                    <div class="action-buttons">
                        <button onclick="showAddHouseModal()" class="add-house-button">
                            <i class="fas fa-plus" style="margin-right: 8px;"></i>
                            Add New House
                        </button>
                        <button onclick="showHouses()" class="secondary-action-button">
                            <i class="fas fa-building" style="margin-right: 8px;"></i>
                            View All Houses
                        </button>
                    </div>
                </div>

                <div class="quick-actions-card">
                    <h2>User Management</h2>
                    <p>Monitor and manage registered users</p>
                    <div class="action-buttons">
                        <button onclick="showUsers()" class="secondary-action-button">
                            <i class="fas fa-users" style="margin-right: 8px;"></i>
                            View All Users
                        </button>
                        <button onclick="loadUserStats()" class="secondary-action-button">
                            <i class="fas fa-chart-bar" style="margin-right: 8px;"></i>
                            User Statistics
                        </button>
                    </div>
                </div>

                <div class="welcome-card">
                    <h2>Welcome to Rental System Admin</h2>
                    <p>
                        Your comprehensive platform for managing rental properties. 
                        Add new houses, upload images, set amenities, and track availability 
                        all in one place.
                    </p>
                </div>
            </div>
        </div>

        <!-- Houses Page -->
        <div id="housesPage" class="page" style="display: none;">
            <nav class="navbar">
                <div class="navbar-content">
                    <a href="#" class="navbar-brand" onclick="showDashboard()">
                        <i class="fas fa-home" style="margin-right: 8px;"></i>
                        Rental System
                    </a>
                    
                    <div class="navbar-actions">
                        <a href="#" onclick="showDashboard()" class="nav-link">
                            Dashboard
                        </a>
                        
                        <button onclick="logout()" class="logout-button">
                            <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="page-header">
                    <h1 class="page-title">House Management</h1>
                    <p class="page-subtitle">Add, edit, and manage your rental properties</p>
                </div>

                <button onclick="showAddHouseModal()" class="add-house-button">
                    <i class="fas fa-plus" style="margin-right: 8px;"></i>
                    Add New House
                </button>

                <div id="housesContainer">
                    <!-- Houses will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Users Page -->
        <div id="usersPage" class="page" style="display: none;">
            <nav class="navbar">
                <div class="navbar-content">
                    <a href="#" class="navbar-brand" onclick="showDashboard()">
                        <i class="fas fa-home" style="margin-right: 8px;"></i>
                        Rental System
                    </a>
                    
                    <div class="navbar-actions">
                        <a href="#" onclick="showHouses()" class="nav-link">
                            <i class="fas fa-building"></i>
                            Manage Houses
                        </a>
                        
                        <a href="#" onclick="showUsers()" class="nav-link active">
                            <i class="fas fa-users"></i>
                            Manage Users
                        </a>
                        
                        <button onclick="logout()" class="logout-button">
                            <i class="fas fa-sign-out-alt" style="margin-right: 8px;"></i>
                            Logout
                        </button>
                    </div>
                </div>
            </nav>

            <div class="dashboard-content">
                <div class="page-header">
                    <h1 class="page-title">User Management</h1>
                    <p class="page-subtitle">Monitor and manage registered users</p>
                </div>

                <div class="users-stats">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-number" id="totalUsersCount">0</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-user-check"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-number" id="activeUsersCount">0</div>
                            <div class="stat-label">Active Users</div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-envelope-circle-check"></i>
                        </div>
                        <div class="stat-info">
                            <div class="stat-number" id="verifiedUsersCount">0</div>
                            <div class="stat-label">Verified Users</div>
                        </div>
                    </div>
                </div>

                <div class="users-table-container">
                    <div class="table-header">
                        <h3>Registered Users</h3>
                        <div class="table-actions">
                            <button onclick="loadUsers()" class="refresh-button">
                                <i class="fas fa-refresh"></i>
                                Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-wrapper">
                        <table class="users-table">
                            <thead>
                                <tr>
                                    <th>User</th>
                                    <th>Email</th>
                                    <th>Age</th>
                                    <th>Gender</th>
                                    <th>Verified</th>
                                    <th>Status</th>
                                    <th>Joined</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody">
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bookings Management Page -->
    <div id="bookingsPage" class="page" style="display: none;">
        <div class="dashboard-container">
            <div class="dashboard-content">
                <div class="page-header">
                    <h1 class="page-title">
                        <i class="fas fa-calendar-check" style="margin-right: 12px;"></i>
                        Booking Management
                    </h1>
                    <p class="page-subtitle">
                        Manage site review bookings and appointments
                    </p>
                </div>

                <div id="bookingStats" class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="pendingBookingsCount">0</div>
                            <div class="stat-label">Pending Bookings</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="approvedBookingsCount">0</div>
                            <div class="stat-label">Approved Bookings</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="todayBookingsCount">0</div>
                            <div class="stat-label">Today's Bookings</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-number" id="totalBookingsCount">0</div>
                            <div class="stat-label">Total Bookings</div>
                        </div>
                    </div>
                </div>

                <div class="booking-filters">
                    <div class="filter-buttons">
                        <button class="filter-btn active" onclick="filterBookings('all')" data-status="all">
                            All Bookings
                        </button>
                        <button class="filter-btn" onclick="filterBookings('pending')" data-status="pending">
                            Pending
                        </button>
                        <button class="filter-btn" onclick="filterBookings('approved')" data-status="approved">
                            Approved
                        </button>
                        <button class="filter-btn" onclick="filterBookings('rejected')" data-status="rejected">
                            Rejected
                        </button>
                        <button class="filter-btn" onclick="filterBookings('completed')" data-status="completed">
                            Completed
                        </button>
                    </div>
                </div>

                <div class="content-card">
                    <div class="card-header">
                        <h2>Site Review Bookings</h2>
                        <button onclick="loadBookings()" class="refresh-button">
                            <i class="fas fa-sync-alt"></i>
                            Refresh
                        </button>
                    </div>
                    <div class="card-content">
                        <div id="bookingsTableContainer" class="table-container">
                            <div id="bookingsLoadingState" class="loading-state" style="display: none;">
                                <div class="spinner"></div>
                                <p>Loading bookings...</p>
                            </div>
                            <div id="bookingsGrid" class="admin-bookings-grid">
                                <!-- Bookings will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking Details Modal -->
    <div id="bookingDetailsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2 class="modal-title">Booking Details</h2>
                <button class="close-button" onclick="closeBookingModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" id="bookingDetailsContent">
                <!-- Booking details will be loaded here -->
            </div>
            
            <div class="modal-footer" id="bookingActionButtons">
                <!-- Action buttons will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit House Modal -->
    <div id="houseModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add New House</h2>
                <button class="close-button" onclick="closeHouseModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="houseForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label class="form-label">House Name *</label>
                        <input type="text" id="houseName" name="name" class="form-input" required />
                    </div>

                    <div class="form-group">
                        <label class="form-label">Description</label>
                        <textarea id="houseDescription" name="description" class="form-textarea" placeholder="Describe the property..."></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Bedrooms *</label>
                            <input type="number" id="houseBedrooms" name="bedrooms" class="form-input" min="1" value="1" required />
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Bathrooms</label>
                            <input type="number" id="houseBathrooms" name="bathrooms" class="form-input" min="1" value="1" />
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Monthly Rent (KSh) *</label>
                            <input type="number" id="housePrice" name="price_per_month" class="form-input" step="1" min="0" required />
                            <small class="form-help">Enter the monthly rent amount in Kenyan Shillings.</small>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Location</label>
                            <input type="text" id="houseLocation" name="location" class="form-input" placeholder="City, State" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Amenities</label>
                        <input type="text" id="houseAmenities" name="amenities" class="form-input" placeholder="WiFi, Gym, Pool, Parking (comma separated)" />
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="houseAvailable" name="is_available" checked />
                            Available for booking
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Images</label>
                        <div class="file-upload-area" onclick="document.getElementById('imageInput').click()">
                            <i class="fas fa-upload upload-icon"></i>
                            <div class="upload-text">Click to upload images or drag and drop</div>
                            <input id="imageInput" type="file" multiple accept="image/*" style="display: none;" />
                        </div>
                        
                        <div id="previewImages" class="preview-images" style="display: none;">
                            <!-- Image previews will be shown here -->
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" onclick="closeHouseModal()" class="secondary-button">
                        Cancel
                    </button>
                    <button type="submit" class="primary-button" id="submitBtn">
                        <span id="submitBtnText">Create House</span>
                        <div id="submitSpinner" class="loading-spinner" style="display: none;"></div>
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="js/config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>