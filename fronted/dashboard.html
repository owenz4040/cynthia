<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Rental System</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/chatbot.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-home"></i>
                <span>Rental System</span>
            </div>
            
            <div class="nav-menu">
                <a href="#" class="nav-link active" data-section="dashboard">
                    <i class="fas fa-th-large"></i> Dashboard
                </a>
                <a href="#" class="nav-link" data-section="properties">
                    <i class="fas fa-building"></i> Properties
                </a>
                <a href="#" class="nav-link" data-section="bookings">
                    <i class="fas fa-calendar-check"></i> My Bookings
                </a>
                <a href="#" class="nav-link" data-section="profile">
                    <i class="fas fa-user"></i> Profile
                </a>
            </div>
            
            <div class="nav-user">
                <div class="user-dropdown">
                    <button class="user-btn" id="userMenuBtn">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%23e0e0e0'/%3E%3Ctext x='20' y='26' text-anchor='middle' fill='%23999' font-size='16' font-family='Arial'%3EU%3C/text%3E%3C/svg%3E" alt="Profile" id="userAvatar" class="user-avatar">
                        <span id="userName">User Name</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" id="userDropdown">
                        <a href="#" class="dropdown-item" data-section="profile">
                            <i class="fas fa-user"></i> Profile
                        </a>
                        <a href="#" class="dropdown-item" data-section="settings">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                        <a href="terms.html" class="dropdown-item" target="_blank">
                            <i class="fas fa-file-alt"></i> Terms & Conditions
                        </a>
                        <a href="site-visit-terms.html" class="dropdown-item" target="_blank">
                            <i class="fas fa-file-contract"></i> Site Visit Terms
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard-section" class="content-section active">
            <div class="page-header">
                <h1><i class="fas fa-th-large"></i> Dashboard</h1>
                <p>Welcome back! Here's what's happening with your rentals.</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-building"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalProperties">0</h3>
                        <p>Available Properties</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-heart"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="savedProperties">0</h3>
                        <p>Saved Properties</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="activeBookings">0</h3>
                        <p>Active Bookings</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="pendingRequests">0</h3>
                        <p>Pending Requests</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-star"></i> Featured Properties</h3>
                        <a href="#" class="view-all" data-section="properties">View All</a>
                    </div>
                    <div class="featured-properties" id="featuredProperties">
                        <!-- Properties will be loaded here -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3><i class="fas fa-bell"></i> Recent Activity</h3>
                    </div>
                    <div class="activity-list" id="activityList">
                        <!-- Activity will be loaded here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Properties Section -->
        <section id="properties-section" class="content-section">
            <div class="page-header">
                <h1><i class="fas fa-building"></i> Available Properties</h1>
                <p>Discover your perfect rental home</p>
            </div>
            
            <div class="filters-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search properties..." id="searchInput">
                </div>
                
                <div class="filter-group">
                    <select id="bedroomFilter">
                        <option value="">All Bedrooms</option>
                        <option value="1">1 Bedroom</option>
                        <option value="2">2 Bedrooms</option>
                        <option value="3">3 Bedrooms</option>
                        <option value="4">4+ Bedrooms</option>
                    </select>
                    
                    <select id="priceFilter">
                        <option value="">All Prices</option>
                        <option value="0-15000">KSh 0 - 15,000/month</option>
                        <option value="15000-30000">KSh 15,000 - 30,000/month</option>
                        <option value="30000-50000">KSh 30,000 - 50,000/month</option>
                        <option value="50000-75000">KSh 50,000 - 75,000/month</option>
                        <option value="75000+">KSh 75,000+/month</option>
                    </select>
                    
                    <button class="filter-btn" id="clearFilters">
                        <i class="fas fa-times"></i> Clear
                    </button>
                </div>
            </div>
            
            <div class="properties-grid" id="propertiesGrid">
                <!-- Properties will be loaded here -->
            </div>
            
            <div class="pagination" id="pagination">
                <!-- Pagination will be added here -->
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile-section" class="content-section">
            <div class="page-header">
                <h1><i class="fas fa-user"></i> My Profile</h1>
                <p>Manage your account information</p>
            </div>
            
            <div class="profile-grid">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Ccircle cx='60' cy='60' r='60' fill='%23e0e0e0'/%3E%3Ctext x='60' y='72' text-anchor='middle' fill='%23999' font-size='48' font-family='Arial'%3EU%3C/text%3E%3C/svg%3E" alt="Profile" id="profileAvatar">
                        <button class="change-avatar-btn" onclick="document.getElementById('profileImageInput').click()">
                            <i class="fas fa-camera"></i>
                        </button>
                        <input type="file" id="profileImageInput" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="profile-info">
                        <h3 id="profileName">User Name</h3>
                        <p id="profileEmail">user@example.com</p>
                        <div class="profile-badges">
                            <span class="badge verified" id="verifiedBadge">
                                <i class="fas fa-check-circle"></i> Verified
                            </span>
                            <span class="badge member-since">
                                <i class="fas fa-calendar"></i> Member since <span id="memberSince">2024</span>
                            </span>
                            <span class="badge terms-accepted" id="siteVisitTermsBadge" style="display: none;">
                                <i class="fas fa-file-contract"></i> Site Visit Terms Accepted
                            </span>
                        </div>
                    </div>
                </div>
                
                <div class="profile-details">
                    <div class="detail-group">
                        <label>Full Name</label>
                        <div class="detail-value">
                            <span id="detailName">-</span>
                            <button class="edit-btn"><i class="fas fa-edit"></i></button>
                        </div>
                    </div>
                    
                    <div class="detail-group">
                        <label>Email Address</label>
                        <div class="detail-value">
                            <span id="detailEmail">-</span>
                            <span class="verified-icon"><i class="fas fa-check-circle"></i></span>
                        </div>
                    </div>
                    
                    <div class="detail-group">
                        <label>Age</label>
                        <div class="detail-value">
                            <span id="detailAge">-</span>
                            <button class="edit-btn"><i class="fas fa-edit"></i></button>
                        </div>
                    </div>
                    
                    <div class="detail-group">
                        <label>Gender</label>
                        <div class="detail-value">
                            <span id="detailGender">-</span>
                            <button class="edit-btn"><i class="fas fa-edit"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings-section" class="content-section">
            <div class="page-header">
                <h1><i class="fas fa-cog"></i> Settings</h1>
                <p>Customize your experience</p>
            </div>
            
            <div class="settings-grid">
                <div class="settings-card">
                    <h3><i class="fas fa-shield-alt"></i> Privacy & Security</h3>
                    <div class="setting-item">
                        <label>Two-Factor Authentication</label>
                        <label class="toggle">
                            <input type="checkbox" id="twoFAToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Email Notifications</label>
                        <label class="toggle">
                            <input type="checkbox" id="emailNotificationsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <button class="settings-btn">Change Password</button>
                </div>
                
                <div class="settings-card">
                    <h3><i class="fas fa-bell"></i> Notifications</h3>
                    <div class="setting-item">
                        <label>New Property Alerts</label>
                        <label class="toggle">
                            <input type="checkbox" id="propertyAlertsToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Booking Updates</label>
                        <label class="toggle">
                            <input type="checkbox" id="bookingUpdatesToggle" checked>
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>Marketing Emails</label>
                        <label class="toggle">
                            <input type="checkbox" id="marketingEmailsToggle">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- My Bookings Section -->
        <section id="bookings-section" class="content-section">
            <div class="page-header">
                <h1><i class="fas fa-calendar-check"></i> My Bookings</h1>
                <p>Track your site review appointments</p>
            </div>
            
            <div class="bookings-filters">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-status="all">All Bookings</button>
                    <button class="filter-tab" data-status="pending">Pending</button>
                    <button class="filter-tab" data-status="approved">Approved</button>
                    <button class="filter-tab" data-status="completed">Completed</button>
                    <button class="filter-tab" data-status="rejected">Rejected</button>
                    <button class="filter-tab" data-status="cancelled">Cancelled</button>
                </div>
            </div>
            
            <div class="bookings-grid" id="bookingsGrid">
                <!-- Bookings will be loaded here -->
            </div>
            
            <div class="pagination" id="bookingsPagination">
                <!-- Pagination will be added here -->
            </div>
        </section>
    </main>

    <!-- Property Details Modal -->
    <div id="propertyModal" class="modal" style="display: none;">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 id="propertyModalTitle">Property Details</h3>
                <button class="close-modal" onclick="closeModal('propertyModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="propertyModalBody">
                <!-- Property details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Site Review Booking Modal -->
    <div id="bookingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-calendar-plus"></i> Schedule Site Review</h3>
                <button class="close-modal" onclick="closeModal('bookingModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="bookingForm">
                    <div class="booking-property-info" id="bookingPropertyInfo">
                        <!-- Property info will be loaded here -->
                    </div>
                    
                    <div class="form-group">
                        <label for="preferredDate" class="form-label">
                            <i class="fas fa-calendar"></i> Preferred Date
                        </label>
                        <input type="date" id="preferredDate" name="preferredDate" class="form-input" required>
                        <small class="form-help">Select your preferred viewing date</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="preferredTime" class="form-label">
                            <i class="fas fa-clock"></i> Preferred Time
                        </label>
                        <select id="preferredTime" name="preferredTime" class="form-input" required>
                            <option value="">Select time slot</option>
                            <option value="09:00">9:00 AM</option>
                            <option value="10:00">10:00 AM</option>
                            <option value="11:00">11:00 AM</option>
                            <option value="12:00">12:00 PM</option>
                            <option value="13:00">1:00 PM</option>
                            <option value="14:00">2:00 PM</option>
                            <option value="15:00">3:00 PM</option>
                            <option value="16:00">4:00 PM</option>
                            <option value="17:00">5:00 PM</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="specialRequests" class="form-label">
                            <i class="fas fa-comment"></i> Special Requests (Optional)
                        </label>
                        <textarea id="specialRequests" name="specialRequests" class="form-input" rows="3" 
                                placeholder="Any specific requirements or questions about the property..."></textarea>
                    </div>
                    
                    <div class="booking-terms">
                        <div class="terms-reminder">
                            <div class="terms-summary">
                                <h4><i class="fas fa-info-circle"></i> Site Visit Guidelines</h4>
                                <ul>
                                    <li><i class="fas fa-id-card"></i> Bring valid Kenyan ID or passport</li>
                                    <li><i class="fas fa-sun"></i> Visits are conducted during daylight hours only</li>
                                    <li><i class="fas fa-clock"></i> Provide 4+ hours notice for cancellations</li>
                                    <li><i class="fas fa-camera"></i> Ask permission before taking photos</li>
                                    <li><i class="fas fa-handshake"></i> Maintain professional and respectful conduct</li>
                                </ul>
                                <p class="terms-link">
                                    <a href="site-visit-terms.html" target="_blank">
                                        <i class="fas fa-external-link-alt"></i> View full Site Visit Terms & Conditions
                                    </a>
                                </p>
                            </div>
                        </div>
                        <label class="checkbox-container">
                            <input type="checkbox" id="agreeToTerms" required>
                            <span class="checkmark"></span>
                            I have read and agree to the Site Visit Terms & Conditions and understand this is a viewing appointment
                        </label>
                    </div>
                    
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" onclick="closeModal('bookingModal')">
                            Cancel
                        </button>
                        <button type="submit" class="btn-primary" id="submitBookingBtn">
                            <span id="bookingBtnText">Schedule Review</span>
                            <span id="bookingSpinner" class="spinner" style="display: none;"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/chatbot.js"></script>
</body>
</html>
